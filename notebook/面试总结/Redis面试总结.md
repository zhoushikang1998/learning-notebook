## Redis 单线程模型



## 如何判断数据是否过期（过期字典）



## 过期数据的删除策略



## Redis 内存淘汰机制



## Redis 持久化机制



## Redis 哨兵(Sentinel)模式和集群模式





## 缓存穿透

- 描述：大量请求的 key 根本不存在于缓存中，导致请求直接到了数据库上，根本没有经过缓存这一层。

- 解决方法
  1. 缓存无效 key
  2. **布隆过滤器**：把所有可能存在的请求的值都存放在布隆过滤器中，当用户请求过来，先判断用户发来的请求的值是否存在于布隆过滤器中。不存在的话，直接返回请求参数错误信息给客户端，存在的话才会走下面的流程

### 布隆过滤器



## 缓存雪崩 

- 描述：**缓存在同一时间大面积的失效，后面的请求都直接落到了数据库上，造成数据库短时间内承受大量请求**
  - 缓存服务不可用
    - 采用 Redis 集群，避免单机出现问题整个缓存服务都没办法使用
    - 限流，避免同时处理大量的请求
  - 热点缓存失效
    - 设置不同的失效时间比如随机设置缓存的失效时间
    - 缓存永不失效



## 如何保证缓存和数据库数据的一致性？



## 3 种常用的缓存读写策略

- 旁路缓存模式
- 读写穿透模式
- 异步缓存写入模式