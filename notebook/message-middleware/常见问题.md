## 常见问题

### 1 节点启动问题

- 通常情况下，**当关闭整个 RabbitMQ 集群时，重启的第一个节点应该是最后关闭的节点**，因为它可以看到其他节点所看不到的事情。但是有时会有一些异常情况出现，比如整个集群都断电而所有节点都认为它不是最后个关闭的。在这种情况下，可以调用 `rabbitmqctl force_boot` 命令，这就告诉节点可以无条件地启动节点 。在此节点关闭后，集群的任何变化，它都会丢失。如果最后一个关闭的节点永久丢失了，那么需要优先使用 rabbitmqctl forget cluster_node {nodename｝ 命令，因为它可以确保镜像队列的正常运转。

### 2 单节点故障恢复

- 需要在集群中的其他节点中执行 rabbitmqctl forget_cluster_node  {nodename｝命令来将故障节点剔除，其中 nodename 表示故障机器节点名称。如果之前有客户端连接到此故障节点上，在故障发生时会有异常报出，此时需要将故障节点的地址从连接列表里删除，并让客户端重新与集群中的节点建立连接，以恢复整个应用。

### 3 其他

- 产品没有设置默认 RMS 报警：根据报警的 vhost 查找产品，通知产品管理员设置 RMS 报警。



## 4 队列同步异常

- 打开同步节点的 management 管理系统，检查哪个队列出问题。
- 检查主要是哪些机器节点出问题。
- 可能原因：高于3.6.1版本的 rabbitMQ 不会自动通知集群进行同步。需要重启相关的机器节点。